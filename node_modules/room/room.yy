


room = ➮ {
	L ∆ {}
	➮ ⓛ { ⌥ (Lᵃ ≟ ∅) Lᵃ = [] ⦙ Lᵃ ⬊ b }
	➮ ⓒ { F ∆ Lᵃ ⦙ ⌥ (F) i⬌F Fⁱ(b) }
	➮ ⓕ { 
	F ∆ Lᵃ ⦙ ⌥(!F) $ ⦙ i⬌F ⌥ (Fⁱ≟b) F⨄(i--,1) }
	➮ ⓢ x y { ⌛ ( ➮{ ⓒ(x, y) }, 0) }
	➮ ⓡ x y { ⓛ(x, ➮{ a(y()) }) }
	➮ ⓐ { ⓢ(a, b) }
	$ {listen:ⓛ, say:ⓢ, forget:ⓕ, ask:ⓐ, reply:ⓡ}
} ()


flags = ➮ {
	L ∆ {}, F = {}
	❶ ➮ {
		Lᵃ = b
		⌥ (Fᵃ && Fᵃᵇ) {
			❶ Fᵃᵇ
			i ⬌ ① { ①ⁱ(c) }
			⏀ Fᵃᵇ
		}
	}
	❷ ➮ {
		⌥ (Lᵃ ≟ b) { c() ⦙ $ }
		⌥ (Fᵃ ≟ ∅) Fᵃ = {}
		⌥ (Fᵃᵇ ≟ ∅) Fᵃᵇ = []
		Fᵃᵇ ⬊ c
		
	}
	$ { signal: ①, wait: ② }
} ()
signal = flags.signal.bind(flags)
wait = flags.wait.bind(flags)

