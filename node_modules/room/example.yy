≣ ('./room')
// uncomment next lines for an example of room/signal usage
room_example()
signal_example()

➮ signal_example {
	wait('windows', 'ready', ➮ { ロ 'WINDOWS READY.1'⦙ })
	wait('windows', 'ready', ➮ { ロ 'WINDOWS READY.2'⦙ })
	signal('windows', 'ready')
	ロ '---------------'
	signal('windows', 'ready')
	wait('windows', 'ready', ➮ { ロ 'WINDOWS READY.3'⦙ })
	signal('windows', 'ready')
	wait('connect', 'on', ➮ {
		wait('windows', 'ready', ➮ {
			ロ 'CONNECTED'
		})
	})
	signal('connect', 'on')
	signal('windows', 'ready')
}

➮ room_example {
	room.forget('login failure', room_example)
	➮ init {
		room.say('morning')
		room.say('morning')
		➮ whocares { ロ 'nobody cares,', a ⦙ }
		room.listen('created', whocares)
	}
	⌛ (init, 0)
	ui()
}

➮ load {
	ロ 'woke up'
	room.say('created', 'ui')
	room.forget('morning', load)
}
➮ menu {
	room.listen('created', ➮ { 
		ロ 'menu created after', a
		room.say('menu created')
	})
	room.reply('how are you', ➮{ 
		ロ 'menu replying'
		$ 'fine'
	})
}
➮ ui { 
	menu()
	room.listen('morning', load)
	room.listen('menu created', ➮{
		room.ask('how are you', ➮{ ロ a ⦙ })
//		room.say('how are you')
	})
}


